<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EcoQuest: Green Treasure Hunt</title>
<style>
  body { font-family: Arial; text-align:center; background: #c0f0c0; margin:0; padding:0; }
  h1 { margin-top: 20px; }
  #gameArea { width: 500px; margin: 20px auto; display: grid; grid-template-columns: repeat(5, 80px); grid-gap: 5px; }
  .cell { width: 80px; height: 80px; background: #87ceeb; border-radius: 10px; display:flex; justify-content:center; align-items:center; cursor:pointer; font-size:24px; transition: transform 0.2s; }
  .cell:hover { transform: scale(1.1); }
  #score, #timer, #ecosystem { font-size: 20px; margin-top: 10px; }
  #questionPanel { margin-top: 20px; font-size:16px; }
  #questionPanel button { margin:5px; padding:6px 10px; cursor:pointer; font-size:16px; }
  #startScreen { position:absolute; top:0; left:0; width:100%; height:100%; background:#c0f0c0; display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:10; }
  #startScreen button { padding:10px 20px; font-size:18px; cursor:pointer; }
</style>
</head>
<body>

<!-- Start Screen -->
<div id="startScreen">
  <h1>EcoQuest: Green Treasure Hunt</h1>
  <p>Find green treasures 🌳, avoid hazards ⚠, and answer questions to earn points!</p>
  <p>You have 60 seconds and 100% ecosystem health. Good luck!</p>
  <button id="startBtn">Start Game</button>
</div>

<!-- Game Info -->
<div id="timer">Time Left: 60s</div>
<div id="score">Score: 0</div>
<div id="ecosystem">Ecosystem Health: 100%</div>
<div id="gameArea"></div>
<div id="questionPanel"></div>
<div id="info" style="margin-top:10px; font-size:16px;"></div>

<script>
const gridSize = 25; // 5x5 grid
const treasuresCount = 7;
const hazardsCount = 5;
let treasures = new Set();
let hazards = new Set();
let foundTreasures = new Set();
let score = 0;
let ecosystem = 100;
let timeLeft = 60;
let timerInterval;

// Generate treasures
while(treasures.size < treasuresCount){
    treasures.add(Math.floor(Math.random()*gridSize));
}

// Generate hazards (not overlapping treasures)
while(hazards.size < hazardsCount){
    let rand = Math.floor(Math.random()*gridSize);
    if(!treasures.has(rand)) hazards.add(rand);
}

// Question pool
const questions = [
    {q:"What is the main benefit of trees?", opts:["Absorb CO2","Produce trash","Pollute"], a:0},
    {q:"Which is renewable energy?", opts:["Solar","Coal","Gas"], a:0},
    {q:"Why protect animals?", opts:["Biodiversity","More hunting","Pollution"], a:0},
    {q:"Why recycle plastics?", opts:["Reduce waste","Increase pollution","Nothing"], a:0},
    {q:"Which helps water conservation?", opts:["Rainwater collection","Dump trash","Cut rivers"], a:0}
];

// Render the grid
const gameArea = document.getElementById('gameArea');

function renderGrid(){
    gameArea.innerHTML = '';
    for(let i=0; i<gridSize; i++){
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.dataset.index = i;
        if(foundTreasures.has(i)){
            cell.style.background = '#2e7d32';
            cell.innerText = '🌳';
        }
        cell.addEventListener('click', () => clickCell(cell));
        gameArea.appendChild(cell);
    }
}

// Start Screen Logic
const startBtn = document.getElementById('startBtn');
startBtn.addEventListener('click', () => {
    document.getElementById('startScreen').style.display = 'none';
    renderGrid();
    startTimer();
});

// Timer Function
function startTimer(){
    timerInterval = setInterval(()=>{
        timeLeft--;
        document.getElementById('timer').innerText = Time Left: ${timeLeft}s;
        if(timeLeft<=0){
            clearInterval(timerInterval);
            endGame();
        }
    },1000);
}

// Cell Click Logic
function clickCell(cell){
    const index = parseInt(cell.dataset.index);
    if(foundTreasures.has(index)) return;

    if(treasures.has(index)){
        showQuestion(cell, index);
    } else if(hazards.has(index)){
        cell.style.background = '#b71c1c';
        cell.innerText = '⚠';
        score -= 5;
        ecosystem = Math.max(0, ecosystem-10);
        document.getElementById('info').innerText = "Hazard encountered! Ecosystem health -10%";
    } else {
        cell.style.background = '#a52a2a';
        cell.innerText = '❌';
        score -= 2;
        document.getElementById('info').innerText = "No treasure here!";
    }

    document.getElementById('score').innerText = Score: ${score};
    document.getElementById('ecosystem').innerText = Ecosystem Health: ${ecosystem}%;

    if(foundTreasures.size === treasuresCount || ecosystem <=0){
        clearInterval(timerInterval);
        endGame();
    }
}

// Show Question When Treasure Found
function showQuestion(cell, index){
    const q = questions[Math.floor(Math.random()*questions.length)];
    const panel = document.getElementById('questionPanel');
    panel.innerHTML = <p>${q.q}</p>;
    q.opts.forEach((opt,i)=>{
        const btn = document.createElement('button');
        btn.innerText = opt;
        btn.addEventListener('click', ()=>{
            answerQuestion(i, q.a, cell, index);
        });
        panel.appendChild(btn);
    });
}

// Answer Question Logic
function answerQuestion(selected, correct, cell, index){
    const panel = document.getElementById('questionPanel');
    panel.innerHTML = '';
    if(selected === correct){
        score += 10;
        ecosystem = Math.min(100, ecosystem+5);
        alert("Correct! 🌿");
    } else {
        score -= 5;
        ecosystem = Math.max(0, ecosystem-5);
        alert("Wrong! ❌");
    }
    cell.style.background = '#2e7d32';
    cell.innerText = '🌳';
    foundTreasures.add(index);

    document.getElementById('score').innerText = Score: ${score};
    document.getElementById('ecosystem').innerText = Ecosystem Health: ${ecosystem}%;

    renderGrid();
}

// End Game Logic
function endGame(){
    document.querySelectorAll('.cell').forEach(c=>c.style.pointerEvents='none');
    document.getElementById('questionPanel').innerHTML = '';
    let msg = Game Over!\nFinal Score: ${score}\nEcosystem Health: ${ecosystem}%;
    document.getElementById('info').innerText = msg;
}
</script>

</body>
</html>